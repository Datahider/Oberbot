<?php

namespace losthost\Oberbot\service;

use losthost\ReflexA\Types\ErrorDescription;

class AIRule_OneTopicOneProblem extends AIAbstractModerator {
    
    const AGENT_NAME = 'onetopic_oneproblem';

    protected function checkResult(string $result): bool|array {
        if ($result == 'OK') {
            return true;
        } else {
            return [
                'text' => $result, 
                'buttons' => [
                    [['text' => 'ðŸ›‘ Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½Ð° 1 Ñ‡Ð°Ñ', 'callback_data' => 'ban_1h']]
                ]
            ];
        }
    }

    protected function error(ErrorDescription $err): bool|array {
        return true;
    }

    protected function getPrompt(): string {
        return <<<FIN
            Ð¢Ñ‹ ÑÐ»ÐµÐ´Ð¸ÑˆÑŒ Ð·Ð° Ð¿Ð¾Ñ€ÑÐ´ÐºÐ¾Ð¼ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ HelpDesk Ð¿Ð¾Ð´ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ Oberdesk.

            ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾: ÐžÐ´Ð½Ð° Ð·Ð°ÑÐ²ÐºÐ° â€” Ð¾Ð´Ð½Ð° Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° (Ð¾Ð´Ð½Ð° Ñ‚ÐµÐ¼Ð° Ð´Ð»Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ).

            Ð¢Ð²Ð¾Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°: ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÑ‚ÑŒ, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð² Ð¾Ð´Ð½Ð¾Ð¹ Ð·Ð°ÑÐ²ÐºÐµ Ð½Ð¾Ð²ÑƒÑŽ, Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ, Ð½Ðµ ÑÐ²ÑÐ·Ð°Ð½Ð½ÑƒÑŽ Ñ Ð¸Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¾Ð¹.

            Ð§Ñ‚Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸ÐµÐ¼ (Ð¿Ð¸ÑÐ°Ñ‚ÑŒ "WARNING" Ð±ÐµÐ· ÐºÐ°Ð²Ñ‹Ñ‡ÐµÐº):
                
                - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð² Ð·Ð°ÑÐ²ÐºÐµ "ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð¿Ñ€Ð¸Ð½Ñ‚ÐµÑ€Ð¾Ð¼" Ð¿Ð¸ÑˆÐµÑ‚ "Ð ÐµÑ‰Ðµ Ñƒ Ð¼ÐµÐ½Ñ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€".
                - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð² Ð·Ð°ÑÐ²ÐºÐµ "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÐŸÐž" Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ "Ð¢Ð°ÐºÐ¶Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¼Ð½Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð¿Ð¾Ñ‡Ñ‚Ñƒ".
                - ÐžÐ±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»Ð° Ð¸Ð»Ð¸ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ð´Ð¾Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð² Ð·Ð°ÑÐ²ÐºÐµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð±Ñ‹Ð»Ð° Ð¿Ð¾ÑÐ²ÑÑ‰ÐµÐ½Ð° Ð´Ñ€ÑƒÐ³Ð¾Ð¹, ÑƒÐ¶Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ð¾Ð¹ Ð´Ð¾Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ.

            Ð§Ñ‚Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐÐžÐ ÐœÐÐ›Ð¬ÐÐ«Ðœ Ð¸ Ð½Ðµ Ð½Ð°Ñ€ÑƒÑˆÐ°ÑŽÑ‰Ð¸Ð¼ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° (Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ "ÐžÐš"):

                - Ð£Ñ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ðµ: Ð›ÑŽÐ±Ñ‹Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð´ÐµÑ‚Ð°Ð»Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÑŽÑ‚ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾ÑÑÐ½ÑÑŽÑ‚ Ð¸Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð½ÑƒÑŽ Ð² Ð·Ð°ÑÐ²ÐºÐµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ.
                - Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¿Ñ€Ð¾ÑˆÐ»Ñ‹Ð¹ Ð¾Ð¿Ñ‹Ñ‚ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð°: ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÑÑ‹Ð»Ð°ÐµÑ‚ÑÑ Ð½Ð° ÑÑ‚Ð°Ñ€ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð¸Ð»Ð¸ Ð´Ð¾Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð¾Ð±ÑŠÑÑÐ½Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ, ÑÐ¼ÐµÐ¶Ð½ÑƒÑŽ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð·Ð°ÑÐ²ÐºÐ¸.
                - ÐžÐ±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñ‹: Ð•ÑÐ»Ð¸ Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð²Ñ‹ÑÑÐ½ÑÐµÑ‚ÑÑ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° ÑˆÐ¸Ñ€Ðµ, Ð¸ ÐµÐµ Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÑ‚ÑÑ Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ñ‹.
                - ÐžÐ±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ ÑÐ¿Ð¾ÑÐ¾Ð±Ð°Ð¼Ð¸ (Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð•ÑÐ»Ð¸ ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð½Ñ‚ÐµÑ€, Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð·Ð°Ð²Ð¸ÑÐ°Ð½Ð¸ÐµÐ¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ð° Ð¸ÑÑ‡ÐµÐ·Ð½ÐµÑ‚, Ñ‚.Ðº. Ð²Ð¸Ð½Ð¾Ð²Ð°Ñ‚ Ð´Ñ€Ð°Ð¹Ð²ÐµÑ€)
            
            ÐšÐ»ÑŽÑ‡ÐµÐ²Ð¾Ð¹ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¹: Ð•ÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°ÐµÑ‚ Ñ‚ÐµÐ¼Ñƒ, ÑƒÐºÐ°Ð·Ð°Ð½Ð½ÑƒÑŽ Ð² Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ð¸ Ð·Ð°ÑÐ²ÐºÐ¸, Ð¸ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ Ð½Ð° Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð¸Ð¼ÐµÐ½Ð½Ð¾ ÑÑ‚Ð¾Ð¹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ â€” ÑÑ‚Ð¾ "ÐžÐš". Ð•ÑÐ»Ð¸ Ð¶Ðµ Ð¾Ð½Ð¾ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ ÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ð¾ Ð½Ð¾Ð²ÑƒÑŽ, ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½ÑƒÑŽ Ñ†ÐµÐ»ÑŒ â€” ÑÑ‚Ð¾ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ðµ.

            ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾ÑÑÐ½ÐµÐ½Ð¸Ð¹. ÐŸÐ¾ÑÑÐ½ÐµÐ½Ð¸Ñ Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ ÑÑ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‹Ð½ÐµÑÐµÐ½Ð¸Ñ Ð²ÐµÑ€Ð´Ð¸ÐºÑ‚Ð°.
            FIN;
    }

}
